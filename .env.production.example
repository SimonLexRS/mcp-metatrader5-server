# ============================================================================
# MetaTrader 5 MCP Server - Production Environment Configuration
# ============================================================================
# This file contains all environment variables needed for production deployment
# Copy this file to .env and fill in your actual values
# SECURITY WARNING: Never commit the actual .env file with real credentials!
# ============================================================================

# ----------------------------------------------------------------------------
# Node.js Server Configuration
# ----------------------------------------------------------------------------

# Port for the HTTP server to listen on
# In production, you might want to use 8080 or 3000
# If behind a reverse proxy, use any available port
NODE_PORT=8080

# Node.js environment (should be 'production' for prod deployments)
NODE_ENV=production

# ----------------------------------------------------------------------------
# Authentication
# ----------------------------------------------------------------------------

# Authentication token for API access
# IMPORTANT: Generate a strong random token for production!
# Use: openssl rand -base64 32
# This token must be included in the 'Auth' header of all API requests
AUTH_TOKEN=CHANGE_ME_TO_A_SECURE_RANDOM_TOKEN

# ----------------------------------------------------------------------------
# Python Configuration
# ----------------------------------------------------------------------------

# Path to Python executable
# On Windows: python or C:\Python311\python.exe
# On Docker: python (should be in PATH)
PYTHON_EXECUTABLE=python

# Python path (usually set automatically by Docker)
# Only override if you have a custom Python module location
# PYTHONPATH=C:\app\src

# ----------------------------------------------------------------------------
# MetaTrader 5 Configuration
# ----------------------------------------------------------------------------

# Path to MetaTrader 5 terminal executable
# Windows default: C:\Program Files\MetaTrader 5\terminal64.exe
# Must be the full path to the MT5 terminal executable
# IMPORTANT: Ensure MT5 is installed at this location
MT5_PATH=C:\Program Files\MetaTrader 5\terminal64.exe

# MT5 Trading Account Number (Login)
# This is your broker-provided account number
# Example: 123456789
MT5_LOGIN=YOUR_MT5_ACCOUNT_NUMBER

# MT5 Trading Account Password
# SECURITY: Store this securely, never commit to version control
# Use secrets management in production (e.g., Docker secrets, Kubernetes secrets)
MT5_PASSWORD=YOUR_MT5_PASSWORD

# MT5 Broker Server Name
# This is provided by your broker (case-sensitive)
# Examples:
#   - ICMarkets-Demo
#   - ICMarkets-Live01
#   - XMGlobal-Demo 2
#   - Alpari-Demo
# Get this from your broker's documentation or MT5 terminal
MT5_SERVER=YOUR_BROKER_SERVER_NAME

# Auto-connect to MT5 on each tool invocation
# When true: Each API call will automatically initialize and login to MT5
# When false: You must manually call initialize() and login() tools
# Recommended: true for stateless HTTP API, false for persistent connections
MT5_AUTO_CONNECT=true

# ----------------------------------------------------------------------------
# Logging Configuration (Optional)
# ----------------------------------------------------------------------------

# Log level for the application
# Options: error, warn, info, debug, trace
# Production recommendation: info or warn
# LOG_LEVEL=info

# Enable debug mode (more verbose logging)
# Set to 'true' only for troubleshooting
# DEBUG=false

# ----------------------------------------------------------------------------
# Resource Limits (Optional)
# ----------------------------------------------------------------------------

# Maximum request body size (in bytes)
# Default: 1048576 (1MB)
# Increase if you need to send larger payloads
# MAX_BODY_SIZE=1048576

# Request timeout (in milliseconds)
# Default: 30000 (30 seconds)
# Increase for long-running MT5 operations
# REQUEST_TIMEOUT=30000

# ----------------------------------------------------------------------------
# Security Headers (Optional)
# ----------------------------------------------------------------------------

# CORS configuration
# Comma-separated list of allowed origins
# Example: https://your-domain.com,https://n8n.your-domain.com
# Leave empty to disable CORS (not recommended for production)
# CORS_ORIGINS=

# Allowed HTTP methods
# CORS_METHODS=GET,POST,OPTIONS

# Rate limiting (requests per minute per IP)
# Set to 0 to disable rate limiting
# RATE_LIMIT=60

# ----------------------------------------------------------------------------
# SSL/TLS Configuration (Optional - if using HTTPS)
# ----------------------------------------------------------------------------

# Enable HTTPS
# Usually handled by reverse proxy (Dokploy, nginx, Caddy)
# ENABLE_HTTPS=false

# SSL certificate paths (if enabling HTTPS in Node.js)
# SSL_CERT_PATH=/path/to/cert.pem
# SSL_KEY_PATH=/path/to/key.pem

# ----------------------------------------------------------------------------
# Monitoring and Health Checks
# ----------------------------------------------------------------------------

# Health check timeout (milliseconds)
# How long to wait for MT5 connection check in /health/detailed
# HEALTH_CHECK_TIMEOUT=5000

# Enable detailed health checks
# When true: /health will also check MT5 connectivity
# When false: /health only checks if server is running
# ENABLE_DETAILED_HEALTH=false

# ----------------------------------------------------------------------------
# Docker-Specific Configuration
# ----------------------------------------------------------------------------

# Container timezone (optional)
# TZ=UTC

# Container user (if running as non-root)
# USER=node

# ----------------------------------------------------------------------------
# Dokploy-Specific Configuration
# ----------------------------------------------------------------------------

# Application name in Dokploy
# APP_NAME=mt5-mcp-server

# Dokploy domain (if using custom domain)
# APP_DOMAIN=mt5-mcp.yourdomain.com

# ----------------------------------------------------------------------------
# Backup and Recovery (Optional)
# ----------------------------------------------------------------------------

# Enable automatic backup of MT5 configuration
# ENABLE_BACKUP=false

# Backup schedule (cron format)
# Example: 0 2 * * * (daily at 2 AM)
# BACKUP_SCHEDULE=0 2 * * *

# Backup retention (days)
# BACKUP_RETENTION=7

# ----------------------------------------------------------------------------
# Advanced Configuration
# ----------------------------------------------------------------------------

# Python bridge timeout (milliseconds)
# How long to wait for Python bridge to respond
# Increase for complex operations or large data fetches
# PYTHON_BRIDGE_TIMEOUT=30000

# Enable request/response compression
# ENABLE_COMPRESSION=true

# Compression threshold (bytes)
# Only compress responses larger than this
# COMPRESSION_THRESHOLD=1024

# ----------------------------------------------------------------------------
# End of Configuration
# ----------------------------------------------------------------------------

# DEPLOYMENT CHECKLIST:
# [ ] Generated strong AUTH_TOKEN
# [ ] Verified MT5_PATH is correct for your installation
# [ ] Confirmed MT5_LOGIN, MT5_PASSWORD, MT5_SERVER with your broker
# [ ] Changed all CHANGE_ME or YOUR_* placeholders
# [ ] Tested connection with MT5 terminal
# [ ] Configured firewall rules for NODE_PORT
# [ ] Set up SSL/TLS (via reverse proxy recommended)
# [ ] Configured monitoring and alerts
# [ ] Tested health endpoints (/health and /health/detailed)
# [ ] Reviewed and adjusted resource limits
# [ ] Backed up this configuration securely
